{"remainingRequest":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js!/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","dependencies":[{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","mtime":1616395888046},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwovLyDlj4LogIPmlofnq6AgaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6MDAwMDg4ODgvYXJ0aWNsZS9kZXRhaWxzLzExMzg0NzI5NAovLyDkuIvovb3mlofku7YKZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRSh1cmwsIHByb3h5LCBwcm94eWh0dHApIHsKICBET1dMT0FEX0ZJTEVfUFJPKHVybCwgJycsIHByb3h5LCBwcm94eWh0dHApOwp9IC8vIOS4i+i9veaWh+S7tgovLyB1cmw6IOS4i+i9vemTvuaOpeOAgu+8iOS+i+Wmgu+8muWFqOmTvuaOpShodHRwOi8vZG93bG9hZC5maWxlL2R6bS5wbmcpIHx8IOmZpOWOu+S7o+eQhuWQjuWJqeS9meeahOmDqOWIhumTvuaOpSgvZHptLnBuZykpCi8vIGZpbGVuYW1lOiDkuIvovb3mlofku7blkI3np7DvvIzkuLrnqbrliJnlj5bpk77mjqXlsL7pg6jmlofku7blkI3jgILvvIjkvovlpoLvvJpkem0ucG5n77yJCi8vIHByb3h5OiDphY3nva7lpb3nmoTku6PnkIbljY/orq7jgIIo5L6L5aaC77yaL2Rvd2xvYWTvvIwgL2Rvd2xvYWQgPT0gaHR0cDovL2Rvd2xvYWQuZmlsZSkKLy8gcHJveHlodHRwOiDku6PnkIbljY/orq7nmoTpk77mjqXlnLDlnYDvvIzlpoLmnpzphY3nva7liJnkvJrmm7/mjaIgdXJsIOS4reivpeauteS7o+eQhumTvuaOpeWcsOWdgOS4uiBwcm94eSDku6PnkIbljY/orq7vvIzmiYDku6UgcHJveHlodHRwIOacieWAvO+8jHByb3h5IOW/hemhu+acieWAvOOAgijkvovlpoLvvJpodHRwOi8vZG93bG9hZC5maWxlKQoKZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRV9QUk8odXJsLCBmaWxlbmFtZSwgcHJveHksIHByb3h5aHR0cCkgewogIC8vIOaWh+S7tuWQjeensAogIHZhciBmbmFtZSA9IGZpbGVuYW1lOwoKICBpZiAoIWZuYW1lKSB7CiAgICAvLyDojrflvpfmnIDlkI7kuIDkuKrmlpzmnaDlnZDmoIcKICAgIHZhciBpbmRleCA9IHVybC5sYXN0SW5kZXhPZignLycpOyAvLyDku47mlpzmnYblkI7kuIDkuKrlnZDmoIflvIDlp4vmiKrlj5YKCiAgICBmbmFtZSA9IHVybC5zdWJzdHJpbmcoaW5kZXggKyAxKTsKICB9IC8vIOS4i+i9veWcsOWdgAoKCiAgdmFyIGRvd2xvYWRVUkwgPSB1cmw7IC8vIOacieS7o+eQhumTvuaOpeWcsOWdgAoKICBpZiAocHJveHlodHRwICYmIHByb3h5KSB7CiAgICAvLyDmm7/mjaLku6PnkIbpk77mjqXlnLDlnYDkuLrku6PnkIbljY/orq4KICAgIGRvd2xvYWRVUkwucmVwbGFjZShwcm94eWh0dHAsIHByb3h5KTsKICB9IGVsc2UgaWYgKHByb3h5KSB7CiAgICAvLyDlsIbkuIvovb3pk77mjqXljLnphY3kuIrku6PnkIbljY/orq4KICAgIGRvd2xvYWRVUkwgPSBwcm94eSArIGRvd2xvYWRVUkw7CiAgfSAvLyDliJvlu7rkuIDkuKph6IqC54K55o+S5YWl55qEZG9jdW1lbnQKCgogIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAvLyDmqKHmi5/pvKDmoIdjbGlja+eCueWHu+S6i+S7tgoKICB2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTsgLy8g6K6+572uYeiKgueCueeahGRvd25sb2Fk5bGe5oCn5YC8CgogIGEuZG93bmxvYWQgPSBmbmFtZTsgLy8g5bCG6ZyA6KaB5LiL6L2955qEVVJM6LWL5YC857uZYeiKgueCueeahGhyZWYKCiAgYS5ocmVmID0gZG93bG9hZFVSTDsgLy8g6Kem5Y+R6byg5qCH54K55Ye75LqL5Lu2CgogIGEuZGlzcGF0Y2hFdmVudChldmVudCk7Cn0="},{"version":3,"sources":["/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js"],"names":["DOWLOAD_FILE","url","proxy","proxyhttp","DOWLOAD_FILE_PRO","filename","fname","index","lastIndexOf","substring","dowloadURL","replace","a","document","createElement","event","MouseEvent","download","href","dispatchEvent"],"mappings":";;;AAAA;AAEA;AACA,OAAO,SAASA,YAAT,CAAuBC,GAAvB,EAA4BC,KAA5B,EAAmCC,SAAnC,EAA8C;AACnDC,EAAAA,gBAAgB,CAACH,GAAD,EAAM,EAAN,EAAUC,KAAV,EAAiBC,SAAjB,CAAhB;AACD,C,CAED;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,gBAAT,CAA2BH,GAA3B,EAAgCI,QAAhC,EAA0CH,KAA1C,EAAiDC,SAAjD,EAA4D;AACjE;AACA,MAAIG,KAAK,GAAGD,QAAZ;;AACA,MAAI,CAACC,KAAL,EAAY;AACV;AACA,QAAMC,KAAK,GAAGN,GAAG,CAACO,WAAJ,CAAgB,GAAhB,CAAd,CAFU,CAGV;;AACAF,IAAAA,KAAK,GAAGL,GAAG,CAACQ,SAAJ,CAAcF,KAAK,GAAG,CAAtB,CAAR;AACD,GARgE,CASjE;;;AACA,MAAIG,UAAU,GAAGT,GAAjB,CAViE,CAWjE;;AACA,MAAIE,SAAS,IAAID,KAAjB,EAAwB;AACtB;AACAQ,IAAAA,UAAU,CAACC,OAAX,CAAmBR,SAAnB,EAA8BD,KAA9B;AACD,GAHD,MAGO,IAAIA,KAAJ,EAAW;AAChB;AACAQ,IAAAA,UAAU,GAAGR,KAAK,GAAGQ,UAArB;AACD,GAlBgE,CAmBjE;;;AACA,MAAIE,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR,CApBiE,CAqBjE;;AACA,MAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAe,OAAf,CAAZ,CAtBiE,CAuBjE;;AACAJ,EAAAA,CAAC,CAACK,QAAF,GAAaX,KAAb,CAxBiE,CAyBjE;;AACAM,EAAAA,CAAC,CAACM,IAAF,GAASR,UAAT,CA1BiE,CA2BjE;;AACAE,EAAAA,CAAC,CAACO,aAAF,CAAgBJ,KAAhB;AACD","sourcesContent":["// 参考文章 https://blog.csdn.net/zz00008888/article/details/113847294\n\n// 下载文件\nexport function DOWLOAD_FILE (url, proxy, proxyhttp) {\n  DOWLOAD_FILE_PRO(url, '', proxy, proxyhttp)\n}\n\n// 下载文件\n// url: 下载链接。（例如：全链接(http://dowload.file/dzm.png) || 除去代理后剩余的部分链接(/dzm.png))\n// filename: 下载文件名称，为空则取链接尾部文件名。（例如：dzm.png）\n// proxy: 配置好的代理协议。(例如：/dowload， /dowload == http://dowload.file)\n// proxyhttp: 代理协议的链接地址，如果配置则会替换 url 中该段代理链接地址为 proxy 代理协议，所以 proxyhttp 有值，proxy 必须有值。(例如：http://dowload.file)\nexport function DOWLOAD_FILE_PRO (url, filename, proxy, proxyhttp) {\n  // 文件名称\n  var fname = filename\n  if (!fname) {\n    // 获得最后一个斜杠坐标\n    const index = url.lastIndexOf('/')\n    // 从斜杆后一个坐标开始截取\n    fname = url.substring(index + 1)\n  }\n  // 下载地址\n  var dowloadURL = url\n  // 有代理链接地址\n  if (proxyhttp && proxy) {\n    // 替换代理链接地址为代理协议\n    dowloadURL.replace(proxyhttp, proxy)\n  } else if (proxy) {\n    // 将下载链接匹配上代理协议\n    dowloadURL = proxy + dowloadURL\n  }\n  // 创建一个a节点插入的document\n  var a = document.createElement('a')\n  // 模拟鼠标click点击事件\n  var event = new MouseEvent('click')\n  // 设置a节点的download属性值\n  a.download = fname\n  // 将需要下载的URL赋值给a节点的href\n  a.href = dowloadURL\n  // 触发鼠标点击事件\n  a.dispatchEvent(event)\n}\n"]}]}