{"remainingRequest":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js!/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","dependencies":[{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","mtime":1618382536850},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lmxhc3QtaW5kZXgtb2YuanMiKTsKCi8vIOWPguiAg+aWh+eroCBodHRwczovL2Jsb2cuY3Nkbi5uZXQvenowMDAwODg4OC9hcnRpY2xlL2RldGFpbHMvMTEzODQ3Mjk0CgovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mlofku7YKICogQHBhcmFtIHsqfSB1cmwg5Y+C6ICDIERPV0xPQURfRklMRV9QUk8oKQogKiBAcGFyYW0geyp9IHByb3h5IOWPguiAgyBET1dMT0FEX0ZJTEVfUFJPKCkKICogQHBhcmFtIHsqfSBwcm94eWh0dHAg5Y+C6ICDIERPV0xPQURfRklMRV9QUk8oKQogKi8KZnVuY3Rpb24gRE9XTE9BRF9GSUxFKHVybCwgcHJveHksIHByb3h5aHR0cCkgewogIERPV0xPQURfRklMRV9QUk8odXJsLCAnJywgcHJveHksIHByb3h5aHR0cCk7Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295paH5Lu2CiAqIEBwYXJhbSB7Kn0gdXJsIOS4i+i9vemTvuaOpeOAgu+8iOS+i+Wmgu+8muWFqOmTvuaOpShodHRwOi8vZG93bG9hZC5maWxlL2R6bS5wbmcpIHx8IOmZpOWOu+S7o+eQhuWQjuWJqeS9meeahOmDqOWIhumTvuaOpSgvZHptLnBuZykpCiAqIEBwYXJhbSB7Kn0gZmlsZW5hbWUg5LiL6L295paH5Lu25ZCN56ew77yM5Li656m65YiZ5Y+W6ZO+5o6l5bC+6YOo5paH5Lu25ZCN44CC77yI5L6L5aaC77yaZHptLnBuZ++8iQogKiBAcGFyYW0geyp9IHByb3h5IOmFjee9ruWlveeahOS7o+eQhuWNj+iuruOAgijkvovlpoLvvJovZG93bG9hZO+8jCAvZG93bG9hZCA9PSBodHRwOi8vZG93bG9hZC5maWxlKQogKiBAcGFyYW0geyp9IHByb3h5aHR0cCDku6PnkIbljY/orq7nmoTpk77mjqXlnLDlnYDvvIzlpoLmnpzphY3nva7liJnkvJrmm7/mjaIgdXJsIOS4reivpeauteS7o+eQhumTvuaOpeWcsOWdgOS4uiBwcm94eSDku6PnkIbljY/orq7vvIzmiYDku6UgcHJveHlodHRwIOacieWAvO+8jHByb3h5IOW/hemhu+acieWAvOOAgijkvovlpoLvvJpodHRwOi8vZG93bG9hZC5maWxlKQogKi8KCgpmdW5jdGlvbiBET1dMT0FEX0ZJTEVfUFJPKHVybCwgZmlsZW5hbWUsIHByb3h5LCBwcm94eWh0dHApIHsKICAvLyDkuIvovb3lnLDlnYAKICB2YXIgZG93bG9hZFVSTCA9IHVybDsgLy8g5pyJ5Luj55CG6ZO+5o6l5Zyw5Z2A77yM5b2T5YmN6ZO+5o6l6YeM6Z2i5ZCM5pe25a2Y5Zyo5Luj55CG5Zyw5Z2A5Y+v5Lul6L+b6KGM5pu/5o2iCgogIGlmIChwcm94eWh0dHAgJiYgcHJveHkgJiYgZG93bG9hZFVSTC5pbmNsdWRlcyhwcm94eWh0dHApKSB7CiAgICAvLyDmm7/mjaLku6PnkIbpk77mjqXlnLDlnYDkuLrku6PnkIbljY/orq4KICAgIGRvd2xvYWRVUkwgPSBkb3dsb2FkVVJMLnJlcGxhY2UocHJveHlodHRwLCBwcm94eSk7IC8vIOS7o+eQhumTvuaOpeS4i+i9vQoKICAgIERPV0xPQURfRklMRV9VUkwoZG93bG9hZFVSTCwgZmlsZW5hbWUpOwogIH0gZWxzZSBpZiAocHJveHkpIHsKICAgIC8vIOWwhuS4i+i9vemTvuaOpeWMuemFjeS4iuS7o+eQhuWNj+iurgogICAgZG93bG9hZFVSTCA9IHByb3h5ICsgZG93bG9hZFVSTDsgLy8g5Luj55CG6ZO+5o6l5LiL6L29CgogICAgRE9XTE9BRF9GSUxFX1VSTChkb3dsb2FkVVJMLCBmaWxlbmFtZSk7CiAgfSBlbHNlIHsKICAgIC8vIOmTvuaOpeS4i+i9vQogICAgRE9XTE9BRF9GSUxFX1VSTF9QUk8oZG93bG9hZFVSTCwgZmlsZW5hbWUpOwogIH0KfQovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mjIflrprku6PnkIbpk77mjqUgfHwg5b2T5YmN572R6aG15ZCM5Z+f5ZCN55qE6ZO+5o6lIHx8IC5wZGbjgIEueGxzIOetiemdnuWbvueJh+inhumikemTvuaOpQogKiBAcGFyYW0geyp9IHVybCDku6PnkIbpk77mjqUgfHwg6ZO+5o6lCiAqIEBwYXJhbSB7Kn0gZmlsZW5hbWUg5paH5Lu25ZCN56ewCiAqLwoKCmZ1bmN0aW9uIERPV0xPQURfRklMRV9VUkwodXJsLCBmaWxlbmFtZSkgewogIC8vIOWIm+W7uuS4gOS4qmHoioLngrnmj5LlhaXnmoRkb2N1bWVudAogIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAvLyDmqKHmi5/pvKDmoIdjbGlja+eCueWHu+S6i+S7tgoKICB2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTsgLy8g6K6+572uYeiKgueCueeahGRvd25sb2Fk5bGe5oCn5YC8CgogIGEuZG93bmxvYWQgPSBET1dMT0FEX0ZJTEVfTkFNRSh1cmwsIGZpbGVuYW1lKTsgLy8g5bCG6ZyA6KaB5LiL6L2955qEVVJM6LWL5YC857uZYeiKgueCueeahGhyZWYKCiAgYS5ocmVmID0gdXJsOyAvLyDop6blj5HpvKDmoIfngrnlh7vkuovku7YKCiAgYS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKfQovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mjIflrprpk77mjqXvvIzkvYbmmK/mnI3liqHlmajlvpflvIDlkK/mlofku7borr/pl67mnYPpmZDvvIzlkKbliJnkvJrmiqXot6jln5/plJnor68KICogQHBhcmFtIHsqfSB1cmwg6Z2e5Luj55CG55qE5q2j5bi46ZO+5o6lCiAqIEBwYXJhbSB7Kn0gZmlsZW5hbWUg5paH5Lu25ZCN56ewCiAqLwoKCmZ1bmN0aW9uIERPV0xPQURfRklMRV9VUkxfUFJPKHVybCwgZmlsZW5hbWUpIHsKICAvLyDojrflj5bpk77mjqXkuozov5vliLbmlbDmja4KICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlcy5ibG9iKCkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgICAvLyDliJvlu7rkuIDkuKph6IqC54K5CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAvLyDliJvlu7rkuIDkuKrlj6/kvpvkuIvovb3pk77mjqUKCiAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgLy8g5bCG6ZyA6KaB5LiL6L2955qEVVJM6LWL5YC857uZYeiKgueCueeahGhyZWYKCiAgICAgIGEuaHJlZiA9IHVybDsgLy8g6K6+572u6IqC54K555qEZG93bmxvYWTlsZ7mgKflgLwKCiAgICAgIGEuZG93bmxvYWQgPSBET1dMT0FEX0ZJTEVfTkFNRSh1cmwsIGZpbGVuYW1lKTsgLy8g6Kem5Y+R54K55Ye75LqL5Lu2CgogICAgICBhLmNsaWNrKCk7IC8vIOmHiuaUvgoKICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgIH0pOwogIH0pOwp9Ci8qKgogKiBAZGVzY3JpcHRpb246IOiOt+WPlumTvuaOpeaWh+S7tuWQjQogKiBAcGFyYW0geyp9IHVybCDpk77mjqUKICogQHBhcmFtIHsqfSBmaWxlbmFtZSDmlofku7blkI3np7AKICovCgoKZnVuY3Rpb24gRE9XTE9BRF9GSUxFX05BTUUodXJsLCBmaWxlbmFtZSkgewogIC8vIOaWh+S7tuWQjeensAogIHZhciBmbmFtZSA9IGZpbGVuYW1lOyAvLyDmsqHmnInmlofku7blkI3lkIzml7bpk77mjqXmnInlgLwKCiAgaWYgKCFmbmFtZSAmJiB1cmwpIHsKICAgIC8vIOiOt+W+l+acgOWQjuS4gOS4quaWnOadoOWdkOaghwogICAgdmFyIGluZGV4ID0gdXJsLmxhc3RJbmRleE9mKCcvJyk7IC8vIOS7juaWnOadhuWQjuS4gOS4quWdkOagh+W8gOWni+aIquWPlgoKICAgIGZuYW1lID0gdXJsLnN1YnN0cmluZyhpbmRleCArIDEpOwogIH0gLy8g6L+U5ZueCgoKICByZXR1cm4gZm5hbWU7Cn0gLy8g5a+85Ye6CgoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgRE9XTE9BRF9GSUxFOiBET1dMT0FEX0ZJTEUsCiAgRE9XTE9BRF9GSUxFX1BSTzogRE9XTE9BRF9GSUxFX1BSTywKICBET1dMT0FEX0ZJTEVfVVJMOiBET1dMT0FEX0ZJTEVfVVJMLAogIERPV0xPQURfRklMRV9VUkxfUFJPOiBET1dMT0FEX0ZJTEVfVVJMX1BSTywKICBET1dMT0FEX0ZJTEVfTkFNRTogRE9XTE9BRF9GSUxFX05BTUUKfTs="},{"version":3,"sources":["/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js"],"names":["DOWLOAD_FILE","url","proxy","proxyhttp","DOWLOAD_FILE_PRO","filename","dowloadURL","includes","replace","DOWLOAD_FILE_URL","DOWLOAD_FILE_URL_PRO","a","document","createElement","event","MouseEvent","download","DOWLOAD_FILE_NAME","href","dispatchEvent","fetch","then","res","blob","window","URL","createObjectURL","click","revokeObjectURL","fname","index","lastIndexOf","substring","module","exports"],"mappings":"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","sourcesContent":["// 参考文章 https://blog.csdn.net/zz00008888/article/details/113847294\n\n/**\n * @description: 下载文件\n * @param {*} url 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxy 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxyhttp 参考 DOWLOAD_FILE_PRO()\n */\nfunction DOWLOAD_FILE (url, proxy, proxyhttp) {\n  DOWLOAD_FILE_PRO(url, '', proxy, proxyhttp)\n}\n\n/**\n * @description: 下载文件\n * @param {*} url 下载链接。（例如：全链接(http://dowload.file/dzm.png) || 除去代理后剩余的部分链接(/dzm.png))\n * @param {*} filename 下载文件名称，为空则取链接尾部文件名。（例如：dzm.png）\n * @param {*} proxy 配置好的代理协议。(例如：/dowload， /dowload == http://dowload.file)\n * @param {*} proxyhttp 代理协议的链接地址，如果配置则会替换 url 中该段代理链接地址为 proxy 代理协议，所以 proxyhttp 有值，proxy 必须有值。(例如：http://dowload.file)\n */\nfunction DOWLOAD_FILE_PRO (url, filename, proxy, proxyhttp) {\n  // 下载地址\n  var dowloadURL = url\n  // 有代理链接地址，当前链接里面同时存在代理地址可以进行替换\n  if (proxyhttp && proxy && dowloadURL.includes(proxyhttp)) {\n    // 替换代理链接地址为代理协议\n    dowloadURL = dowloadURL.replace(proxyhttp, proxy)\n    // 代理链接下载\n    DOWLOAD_FILE_URL(dowloadURL, filename)\n  } else if (proxy) {\n    // 将下载链接匹配上代理协议\n    dowloadURL = proxy + dowloadURL\n    // 代理链接下载\n    DOWLOAD_FILE_URL(dowloadURL, filename)\n  } else {\n    // 链接下载\n    DOWLOAD_FILE_URL_PRO(dowloadURL, filename)\n  }\n}\n\n/**\n * @description: 下载指定代理链接 || 当前网页同域名的链接 || .pdf、.xls 等非图片视频链接\n * @param {*} url 代理链接 || 链接\n * @param {*} filename 文件名称\n */\nfunction DOWLOAD_FILE_URL (url, filename) {\n  // 创建一个a节点插入的document\n  var a = document.createElement('a')\n  // 模拟鼠标click点击事件\n  var event = new MouseEvent('click')\n  // 设置a节点的download属性值\n  a.download = DOWLOAD_FILE_NAME(url, filename)\n  // 将需要下载的URL赋值给a节点的href\n  a.href = url\n  // 触发鼠标点击事件\n  a.dispatchEvent(event)\n}\n\n/**\n * @description: 下载指定链接，但是服务器得开启文件访问权限，否则会报跨域错误\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n */\nfunction DOWLOAD_FILE_URL_PRO (url, filename) {\n  // 获取链接二进制数据\n  fetch(url).then(res => res.blob().then(blob => {\n    // 创建一个a节点\n    var a = document.createElement('a')\n    // 创建一个可供下载链接\n    var url = window.URL.createObjectURL(blob)\n    // 将需要下载的URL赋值给a节点的href\n    a.href = url\n    // 设置节点的download属性值\n    a.download = DOWLOAD_FILE_NAME(url, filename)\n    // 触发点击事件\n    a.click()\n    // 释放\n    window.URL.revokeObjectURL(url)\n  }))\n}\n\n/**\n * @description: 获取链接文件名\n * @param {*} url 链接\n * @param {*} filename 文件名称\n */\nfunction DOWLOAD_FILE_NAME (url, filename) {\n  // 文件名称\n  var fname = filename\n  // 没有文件名同时链接有值\n  if (!fname && url) {\n    // 获得最后一个斜杠坐标\n    const index = url.lastIndexOf('/')\n    // 从斜杆后一个坐标开始截取\n    fname = url.substring(index + 1)\n  }\n  // 返回\n  return fname\n}\n\n// 导出\nmodule.exports = {\n  DOWLOAD_FILE,\n  DOWLOAD_FILE_PRO,\n  DOWLOAD_FILE_URL,\n  DOWLOAD_FILE_URL_PRO,\n  DOWLOAD_FILE_NAME\n}"]}]}