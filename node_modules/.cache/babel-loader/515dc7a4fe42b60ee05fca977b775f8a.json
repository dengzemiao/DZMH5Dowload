{"remainingRequest":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js!/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","dependencies":[{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","mtime":1618205421529},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwovLyDlj4LogIPmlofnq6AgaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6MDAwMDg4ODgvYXJ0aWNsZS9kZXRhaWxzLzExMzg0NzI5NAoKLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295paH5Lu2CiAqIEBwYXJhbSB7Kn0gdXJsIOWPguiAgyBET1dMT0FEX0ZJTEVfUFJPKCkKICogQHBhcmFtIHsqfSBwcm94eSDlj4LogIMgRE9XTE9BRF9GSUxFX1BSTygpCiAqIEBwYXJhbSB7Kn0gcHJveHlodHRwIOWPguiAgyBET1dMT0FEX0ZJTEVfUFJPKCkKICovCmV4cG9ydCBmdW5jdGlvbiBET1dMT0FEX0ZJTEUodXJsLCBwcm94eSwgcHJveHlodHRwKSB7CiAgRE9XTE9BRF9GSUxFX1BSTyh1cmwsICcnLCBwcm94eSwgcHJveHlodHRwKTsKfQovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mlofku7YKICogQHBhcmFtIHsqfSB1cmwg5LiL6L296ZO+5o6l44CC77yI5L6L5aaC77ya5YWo6ZO+5o6lKGh0dHA6Ly9kb3dsb2FkLmZpbGUvZHptLnBuZykgfHwg6Zmk5Y675Luj55CG5ZCO5Ymp5L2Z55qE6YOo5YiG6ZO+5o6lKC9kem0ucG5nKSkKICogQHBhcmFtIHsqfSBmaWxlbmFtZSDkuIvovb3mlofku7blkI3np7DvvIzkuLrnqbrliJnlj5bpk77mjqXlsL7pg6jmlofku7blkI3jgILvvIjkvovlpoLvvJpkem0ucG5n77yJCiAqIEBwYXJhbSB7Kn0gcHJveHkg6YWN572u5aW955qE5Luj55CG5Y2P6K6u44CCKOS+i+Wmgu+8mi9kb3dsb2Fk77yMIC9kb3dsb2FkID09IGh0dHA6Ly9kb3dsb2FkLmZpbGUpCiAqIEBwYXJhbSB7Kn0gcHJveHlodHRwIOS7o+eQhuWNj+iurueahOmTvuaOpeWcsOWdgO+8jOWmguaenOmFjee9ruWImeS8muabv+aNoiB1cmwg5Lit6K+l5q615Luj55CG6ZO+5o6l5Zyw5Z2A5Li6IHByb3h5IOS7o+eQhuWNj+iuru+8jOaJgOS7pSBwcm94eWh0dHAg5pyJ5YC877yMcHJveHkg5b+F6aG75pyJ5YC844CCKOS+i+Wmgu+8mmh0dHA6Ly9kb3dsb2FkLmZpbGUpCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRV9QUk8odXJsLCBmaWxlbmFtZSwgcHJveHksIHByb3h5aHR0cCkgewogIC8vIOS4i+i9veWcsOWdgAogIHZhciBkb3dsb2FkVVJMID0gdXJsOyAvLyDmnInku6PnkIbpk77mjqXlnLDlnYAKCiAgaWYgKHByb3h5aHR0cCAmJiBwcm94eSkgewogICAgLy8g5pu/5o2i5Luj55CG6ZO+5o6l5Zyw5Z2A5Li65Luj55CG5Y2P6K6uCiAgICBkb3dsb2FkVVJMID0gZG93bG9hZFVSTC5yZXBsYWNlKHByb3h5aHR0cCwgcHJveHkpOyAvLyDku6PnkIbov57mjqXkuIvovb0KCiAgICBET1dMT0FEX0ZJTEVfVVJMX1BST1hZKGRvd2xvYWRVUkwsIGZpbGVuYW1lKTsKICB9IGVsc2UgaWYgKHByb3h5KSB7CiAgICAvLyDlsIbkuIvovb3pk77mjqXljLnphY3kuIrku6PnkIbljY/orq4KICAgIGRvd2xvYWRVUkwgPSBwcm94eSArIGRvd2xvYWRVUkw7IC8vIOS7o+eQhui/nuaOpeS4i+i9vQoKICAgIERPV0xPQURfRklMRV9VUkxfUFJPWFkoZG93bG9hZFVSTCwgZmlsZW5hbWUpOwogIH0gZWxzZSB7CiAgICAvLyDov57mjqXkuIvovb0KICAgIERPV0xPQURfRklMRV9VUkwoZG93bG9hZFVSTCwgZmlsZW5hbWUpOwogIH0KfQovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mjIflrprku6PnkIbpk77mjqUKICogQHBhcmFtIHsqfSB1cmwg5ou85o6l5aW955qE5Luj55CG6L+e5o6lCiAqIEBwYXJhbSB7Kn0gZmlsZW5hbWUg5paH5Lu25ZCN56ewCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRV9VUkxfUFJPWFkodXJsLCBmaWxlbmFtZSkgewogIC8vIOWIm+W7uuS4gOS4qmHoioLngrnmj5LlhaXnmoRkb2N1bWVudAogIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAvLyDmqKHmi5/pvKDmoIdjbGlja+eCueWHu+S6i+S7tgoKICB2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTsgLy8g6K6+572uYeiKgueCueeahGRvd25sb2Fk5bGe5oCn5YC8CgogIGEuZG93bmxvYWQgPSBET1dMT0FEX0ZJTEVfTkFNRSh1cmwsIGZpbGVuYW1lKTsgLy8g5bCG6ZyA6KaB5LiL6L2955qEVVJM6LWL5YC857uZYeiKgueCueeahGhyZWYKCiAgYS5ocmVmID0gdXJsOyAvLyDop6blj5HpvKDmoIfngrnlh7vkuovku7YKCiAgYS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKfQovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mjIflrprpk77mjqUKICogQHBhcmFtIHsqfSB1cmwg6Z2e5Luj55CG55qE5q2j5bi46ZO+5o6lCiAqIEBwYXJhbSB7Kn0gZmlsZW5hbWUg5paH5Lu25ZCN56ewCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRV9VUkwodXJsLCBmaWxlbmFtZSkgewogIC8vIOiOt+WPlumTvuaOpeS6jOi/m+WItuaVsOaNrgogIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXR1cm4gcmVzLmJsb2IoKS50aGVuKGZ1bmN0aW9uIChibG9iKSB7CiAgICAgIC8vIOWIm+W7uuS4gOS4qmHoioLngrkKICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IC8vIOWIm+W7uuS4gOS4quWPr+S+m+S4i+i9vemTvuaOpQoKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAvLyDlsIbpnIDopoHkuIvovb3nmoRVUkzotYvlgLznu5lh6IqC54K555qEaHJlZgoKICAgICAgYS5ocmVmID0gdXJsOyAvLyDorr7nva7oioLngrnnmoRkb3dubG9hZOWxnuaAp+WAvAoKICAgICAgYS5kb3dubG9hZCA9IERPV0xPQURfRklMRV9OQU1FKHVybCwgZmlsZW5hbWUpOyAvLyDop6blj5Hngrnlh7vkuovku7YKCiAgICAgIGEuY2xpY2soKTsgLy8g6YeK5pS+CgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSk7CiAgfSk7Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog6I635Y+W6ZO+5o6l5paH5Lu25ZCNCiAqIEBwYXJhbSB7Kn0gdXJsIOmdnuS7o+eQhueahOato+W4uOmTvuaOpQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOaWh+S7tuWQjeensAogKi8KCmV4cG9ydCBmdW5jdGlvbiBET1dMT0FEX0ZJTEVfTkFNRSh1cmwsIGZpbGVuYW1lKSB7CiAgLy8g5paH5Lu25ZCN56ewCiAgdmFyIGZuYW1lID0gZmlsZW5hbWU7IC8vIOayoeacieaWh+S7tuWQjeWQjOaXtumTvuaOpeacieWAvAoKICBpZiAoIWZuYW1lICYmIHVybCkgewogICAgLy8g6I635b6X5pyA5ZCO5LiA5Liq5pac5p2g5Z2Q5qCHCiAgICB2YXIgaW5kZXggPSB1cmwubGFzdEluZGV4T2YoJy8nKTsgLy8g5LuO5pac5p2G5ZCO5LiA5Liq5Z2Q5qCH5byA5aeL5oiq5Y+WCgogICAgZm5hbWUgPSB1cmwuc3Vic3RyaW5nKGluZGV4ICsgMSk7CiAgfSAvLyDov5Tlm54KCgogIHJldHVybiBmbmFtZTsKfQ=="},{"version":3,"sources":["/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js"],"names":["DOWLOAD_FILE","url","proxy","proxyhttp","DOWLOAD_FILE_PRO","filename","dowloadURL","replace","DOWLOAD_FILE_URL_PROXY","DOWLOAD_FILE_URL","a","document","createElement","event","MouseEvent","download","DOWLOAD_FILE_NAME","href","dispatchEvent","fetch","then","res","blob","window","URL","createObjectURL","click","revokeObjectURL","fname","index","lastIndexOf","substring"],"mappings":"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","sourcesContent":["// 参考文章 https://blog.csdn.net/zz00008888/article/details/113847294\n\n/**\n * @description: 下载文件\n * @param {*} url 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxy 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxyhttp 参考 DOWLOAD_FILE_PRO()\n */\nexport function DOWLOAD_FILE (url, proxy, proxyhttp) {\n  DOWLOAD_FILE_PRO(url, '', proxy, proxyhttp)\n}\n\n/**\n * @description: 下载文件\n * @param {*} url 下载链接。（例如：全链接(http://dowload.file/dzm.png) || 除去代理后剩余的部分链接(/dzm.png))\n * @param {*} filename 下载文件名称，为空则取链接尾部文件名。（例如：dzm.png）\n * @param {*} proxy 配置好的代理协议。(例如：/dowload， /dowload == http://dowload.file)\n * @param {*} proxyhttp 代理协议的链接地址，如果配置则会替换 url 中该段代理链接地址为 proxy 代理协议，所以 proxyhttp 有值，proxy 必须有值。(例如：http://dowload.file)\n */\nexport function DOWLOAD_FILE_PRO (url, filename, proxy, proxyhttp) {\n  // 下载地址\n  var dowloadURL = url\n  // 有代理链接地址\n  if (proxyhttp && proxy) {\n    // 替换代理链接地址为代理协议\n    dowloadURL = dowloadURL.replace(proxyhttp, proxy)\n    // 代理连接下载\n    DOWLOAD_FILE_URL_PROXY(dowloadURL, filename)\n  } else if (proxy) {\n    // 将下载链接匹配上代理协议\n    dowloadURL = proxy + dowloadURL\n    // 代理连接下载\n    DOWLOAD_FILE_URL_PROXY(dowloadURL, filename)\n  } else {\n    // 连接下载\n    DOWLOAD_FILE_URL(dowloadURL, filename)\n  }\n}\n\n/**\n * @description: 下载指定代理链接\n * @param {*} url 拼接好的代理连接\n * @param {*} filename 文件名称\n */\nexport function DOWLOAD_FILE_URL_PROXY (url, filename) {\n  // 创建一个a节点插入的document\n  var a = document.createElement('a')\n  // 模拟鼠标click点击事件\n  var event = new MouseEvent('click')\n  // 设置a节点的download属性值\n  a.download = DOWLOAD_FILE_NAME(url, filename)\n  // 将需要下载的URL赋值给a节点的href\n  a.href = url\n  // 触发鼠标点击事件\n  a.dispatchEvent(event)\n}\n\n/**\n * @description: 下载指定链接\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n */\nexport function DOWLOAD_FILE_URL (url, filename) {\n  // 获取链接二进制数据\n  fetch(url).then(res => res.blob().then(blob => {\n    // 创建一个a节点\n    var a = document.createElement('a')\n    // 创建一个可供下载链接\n    var url = window.URL.createObjectURL(blob)\n    // 将需要下载的URL赋值给a节点的href\n    a.href = url\n    // 设置节点的download属性值\n    a.download = DOWLOAD_FILE_NAME(url, filename)\n    // 触发点击事件\n    a.click()\n    // 释放\n    window.URL.revokeObjectURL(url)\n  }))\n}\n\n/**\n * @description: 获取链接文件名\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n */\n export function DOWLOAD_FILE_NAME (url, filename) {\n  // 文件名称\n  var fname = filename\n  // 没有文件名同时链接有值\n  if (!fname && url) {\n    // 获得最后一个斜杠坐标\n    const index = url.lastIndexOf('/')\n    // 从斜杆后一个坐标开始截取\n    fname = url.substring(index + 1)\n  }\n  // 返回\n  return fname\n}"]}]}