{"remainingRequest":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js!/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","dependencies":[{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","mtime":1618199068851},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLyDlj4LogIPmlofnq6AgaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6MDAwMDg4ODgvYXJ0aWNsZS9kZXRhaWxzLzExMzg0NzI5NAoKLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295paH5Lu2CiAqIEBwYXJhbSB7Kn0gdXJsIOWPguiAgyBET1dMT0FEX0ZJTEVfUFJPKCkKICogQHBhcmFtIHsqfSBwcm94eQogKiBAcGFyYW0geyp9IHByb3h5aHR0cAogKiBAcmV0dXJuIHsqfQogKi8KZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRSh1cmwsIHByb3h5LCBwcm94eWh0dHApIHsKICBET1dMT0FEX0ZJTEVfUFJPKHVybCwgJycsIHByb3h5LCBwcm94eWh0dHApOwp9Ci8qKgogKiBAZGVzY3JpcHRpb246IOS4i+i9veaWh+S7tgogKiBAcGFyYW0geyp9IHVybCDkuIvovb3pk77mjqXjgILvvIjkvovlpoLvvJrlhajpk77mjqUoaHR0cDovL2Rvd2xvYWQuZmlsZS9kem0ucG5nKSB8fCDpmaTljrvku6PnkIblkI7liankvZnnmoTpg6jliIbpk77mjqUoL2R6bS5wbmcpKQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOS4i+i9veaWh+S7tuWQjeensO+8jOS4uuepuuWImeWPlumTvuaOpeWwvumDqOaWh+S7tuWQjeOAgu+8iOS+i+Wmgu+8mmR6bS5wbmfvvIkKICogQHBhcmFtIHsqfSBwcm94eSDphY3nva7lpb3nmoTku6PnkIbljY/orq7jgIIo5L6L5aaC77yaL2Rvd2xvYWTvvIwgL2Rvd2xvYWQgPT0gaHR0cDovL2Rvd2xvYWQuZmlsZSkKICogQHBhcmFtIHsqfSBwcm94eWh0dHAg5Luj55CG5Y2P6K6u55qE6ZO+5o6l5Zyw5Z2A77yM5aaC5p6c6YWN572u5YiZ5Lya5pu/5o2iIHVybCDkuK3or6XmrrXku6PnkIbpk77mjqXlnLDlnYDkuLogcHJveHkg5Luj55CG5Y2P6K6u77yM5omA5LulIHByb3h5aHR0cCDmnInlgLzvvIxwcm94eSDlv4XpobvmnInlgLzjgIIo5L6L5aaC77yaaHR0cDovL2Rvd2xvYWQuZmlsZSkKICogQHJldHVybiB7Kn0KICovCgpleHBvcnQgZnVuY3Rpb24gRE9XTE9BRF9GSUxFX1BSTyh1cmwsIGZpbGVuYW1lLCBwcm94eSwgcHJveHlodHRwKSB7CiAgLy8g5paH5Lu25ZCN56ewCiAgdmFyIGZuYW1lID0gZmlsZW5hbWU7CgogIGlmICghZm5hbWUpIHsKICAgIC8vIOiOt+W+l+acgOWQjuS4gOS4quaWnOadoOWdkOaghwogICAgdmFyIGluZGV4ID0gdXJsLmxhc3RJbmRleE9mKCcvJyk7IC8vIOS7juaWnOadhuWQjuS4gOS4quWdkOagh+W8gOWni+aIquWPlgoKICAgIGZuYW1lID0gdXJsLnN1YnN0cmluZyhpbmRleCArIDEpOwogIH0gLy8g5LiL6L295Zyw5Z2ACgoKICB2YXIgZG93bG9hZFVSTCA9IHVybDsgLy8g5pyJ5Luj55CG6ZO+5o6l5Zyw5Z2ACgogIGlmIChwcm94eWh0dHAgJiYgcHJveHkpIHsKICAgIC8vIOabv+aNouS7o+eQhumTvuaOpeWcsOWdgOS4uuS7o+eQhuWNj+iurgogICAgZG93bG9hZFVSTCA9IGRvd2xvYWRVUkwucmVwbGFjZShwcm94eWh0dHAsIHByb3h5KTsgLy8g5Luj55CG6L+e5o6l5LiL6L29CgogICAgRE9XTE9BRF9GSUxFX1VSTF9QUk9YWShkb3dsb2FkVVJMLCBmbmFtZSk7CiAgfSBlbHNlIGlmIChwcm94eSkgewogICAgLy8g5bCG5LiL6L296ZO+5o6l5Yy56YWN5LiK5Luj55CG5Y2P6K6uCiAgICBkb3dsb2FkVVJMID0gcHJveHkgKyBkb3dsb2FkVVJMOyAvLyDku6PnkIbov57mjqXkuIvovb0KCiAgICBET1dMT0FEX0ZJTEVfVVJMX1BST1hZKGRvd2xvYWRVUkwsIGZuYW1lKTsKICB9IGVsc2UgewogICAgLy8g6L+e5o6l5LiL6L29CiAgICBET1dMT0FEX0ZJTEVfVVJMKGRvd2xvYWRVUkwsIGZuYW1lKTsKICB9Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295oyH5a6a5Luj55CG6ZO+5o6lCiAqIEBwYXJhbSB7Kn0gdXJsIOaLvOaOpeWlveeahOS7o+eQhui/nuaOpQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOaWh+S7tuWQjeensAogKiBAcmV0dXJuIHsqfQogKi8KCmV4cG9ydCBmdW5jdGlvbiBET1dMT0FEX0ZJTEVfVVJMX1BST1hZKHVybCwgZmlsZW5hbWUpIHsKICAvLyDliJvlu7rkuIDkuKph6IqC54K55o+S5YWl55qEZG9jdW1lbnQKICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgLy8g5qih5ouf6byg5qCHY2xpY2vngrnlh7vkuovku7YKCiAgdmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJyk7IC8vIOiuvue9rmHoioLngrnnmoRkb3dubG9hZOWxnuaAp+WAvAoKICBhLmRvd25sb2FkID0gZmlsZW5hbWU7IC8vIOWwhumcgOimgeS4i+i9veeahFVSTOi1i+WAvOe7mWHoioLngrnnmoRocmVmCgogIGEuaHJlZiA9IHVybDsgLy8g6Kem5Y+R6byg5qCH54K55Ye75LqL5Lu2CgogIGEuZGlzcGF0Y2hFdmVudChldmVudCk7Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295oyH5a6a6ZO+5o6lCiAqIEBwYXJhbSB7Kn0gdXJsIOmdnuS7o+eQhueahOato+W4uOmTvuaOpQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOaWh+S7tuWQjeensAogKiBAcmV0dXJuIHsqfQogKi8KCmV4cG9ydCBmdW5jdGlvbiBET1dMT0FEX0ZJTEVfVVJMKHVybCwgZmlsZW5hbWUpIHsKICAvLyDojrflj5bpk77mjqXkuozov5vliLbmlbDmja4KICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlcy5ibG9iKCkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgICAvLyDliJvlu7rkuIDkuKph6IqC54K5CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAvLyDliJvlu7rkuIDkuKrlj6/kvpvkuIvovb3pk77mjqUKCiAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgLy8g5bCG6ZyA6KaB5LiL6L2955qEVVJM6LWL5YC857uZYeiKgueCueeahGhyZWYKCiAgICAgIGEuaHJlZiA9IHVybDsgLy8g6K6+572u6IqC54K555qEZG93bmxvYWTlsZ7mgKflgLwKCiAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgLy8g6Kem5Y+R54K55Ye75LqL5Lu2CgogICAgICBhLmNsaWNrKCk7IC8vIOmHiuaUvgoKICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgIH0pOwogIH0pOwp9"},{"version":3,"sources":["/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js"],"names":["DOWLOAD_FILE","url","proxy","proxyhttp","DOWLOAD_FILE_PRO","filename","fname","index","lastIndexOf","substring","dowloadURL","replace","DOWLOAD_FILE_URL_PROXY","DOWLOAD_FILE_URL","a","document","createElement","event","MouseEvent","download","href","dispatchEvent","fetch","then","res","blob","window","URL","createObjectURL","click","revokeObjectURL"],"mappings":";;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,YAAT,CAAuBC,GAAvB,EAA4BC,KAA5B,EAAmCC,SAAnC,EAA8C;AACnDC,EAAAA,gBAAgB,CAACH,GAAD,EAAM,EAAN,EAAUC,KAAV,EAAiBC,SAAjB,CAAhB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,gBAAT,CAA2BH,GAA3B,EAAgCI,QAAhC,EAA0CH,KAA1C,EAAiDC,SAAjD,EAA4D;AACjE;AACA,MAAIG,KAAK,GAAGD,QAAZ;;AACA,MAAI,CAACC,KAAL,EAAY;AACV;AACA,QAAMC,KAAK,GAAGN,GAAG,CAACO,WAAJ,CAAgB,GAAhB,CAAd,CAFU,CAGV;;AACAF,IAAAA,KAAK,GAAGL,GAAG,CAACQ,SAAJ,CAAcF,KAAK,GAAG,CAAtB,CAAR;AACD,GARgE,CASjE;;;AACA,MAAIG,UAAU,GAAGT,GAAjB,CAViE,CAWjE;;AACA,MAAIE,SAAS,IAAID,KAAjB,EAAwB;AACtB;AACAQ,IAAAA,UAAU,GAAGA,UAAU,CAACC,OAAX,CAAmBR,SAAnB,EAA8BD,KAA9B,CAAb,CAFsB,CAGtB;;AACAU,IAAAA,sBAAsB,CAACF,UAAD,EAAaJ,KAAb,CAAtB;AACD,GALD,MAKO,IAAIJ,KAAJ,EAAW;AAChB;AACAQ,IAAAA,UAAU,GAAGR,KAAK,GAAGQ,UAArB,CAFgB,CAGhB;;AACAE,IAAAA,sBAAsB,CAACF,UAAD,EAAaJ,KAAb,CAAtB;AACD,GALM,MAKA;AACL;AACAO,IAAAA,gBAAgB,CAACH,UAAD,EAAaJ,KAAb,CAAhB;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASM,sBAAT,CAAiCX,GAAjC,EAAsCI,QAAtC,EAAgD;AACrD;AACA,MAAIS,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR,CAFqD,CAGrD;;AACA,MAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAe,OAAf,CAAZ,CAJqD,CAKrD;;AACAJ,EAAAA,CAAC,CAACK,QAAF,GAAad,QAAb,CANqD,CAOrD;;AACAS,EAAAA,CAAC,CAACM,IAAF,GAASnB,GAAT,CARqD,CASrD;;AACAa,EAAAA,CAAC,CAACO,aAAF,CAAgBJ,KAAhB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;AACC,OAAO,SAASJ,gBAAT,CAA2BZ,GAA3B,EAAgCI,QAAhC,EAA0C;AAChD;AACAiB,EAAAA,KAAK,CAACrB,GAAD,CAAL,CAAWsB,IAAX,CAAgB,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,GAAWF,IAAX,CAAgB,UAAAE,IAAI,EAAI;AAC7C;AACA,UAAIX,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR,CAF6C,CAG7C;;AACA,UAAIf,GAAG,GAAGyB,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BH,IAA3B,CAAV,CAJ6C,CAK7C;;AACAX,MAAAA,CAAC,CAACM,IAAF,GAASnB,GAAT,CAN6C,CAO7C;;AACAa,MAAAA,CAAC,CAACK,QAAF,GAAad,QAAb,CAR6C,CAS7C;;AACAS,MAAAA,CAAC,CAACe,KAAF,GAV6C,CAW7C;;AACAH,MAAAA,MAAM,CAACC,GAAP,CAAWG,eAAX,CAA2B7B,GAA3B;AACD,KAbsB,CAAJ;AAAA,GAAnB;AAcD","sourcesContent":["// 参考文章 https://blog.csdn.net/zz00008888/article/details/113847294\n\n/**\n * @description: 下载文件\n * @param {*} url 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxy\n * @param {*} proxyhttp\n * @return {*}\n */\nexport function DOWLOAD_FILE (url, proxy, proxyhttp) {\n  DOWLOAD_FILE_PRO(url, '', proxy, proxyhttp)\n}\n\n/**\n * @description: 下载文件\n * @param {*} url 下载链接。（例如：全链接(http://dowload.file/dzm.png) || 除去代理后剩余的部分链接(/dzm.png))\n * @param {*} filename 下载文件名称，为空则取链接尾部文件名。（例如：dzm.png）\n * @param {*} proxy 配置好的代理协议。(例如：/dowload， /dowload == http://dowload.file)\n * @param {*} proxyhttp 代理协议的链接地址，如果配置则会替换 url 中该段代理链接地址为 proxy 代理协议，所以 proxyhttp 有值，proxy 必须有值。(例如：http://dowload.file)\n * @return {*}\n */\nexport function DOWLOAD_FILE_PRO (url, filename, proxy, proxyhttp) {\n  // 文件名称\n  var fname = filename\n  if (!fname) {\n    // 获得最后一个斜杠坐标\n    const index = url.lastIndexOf('/')\n    // 从斜杆后一个坐标开始截取\n    fname = url.substring(index + 1)\n  }\n  // 下载地址\n  var dowloadURL = url\n  // 有代理链接地址\n  if (proxyhttp && proxy) {\n    // 替换代理链接地址为代理协议\n    dowloadURL = dowloadURL.replace(proxyhttp, proxy)\n    // 代理连接下载\n    DOWLOAD_FILE_URL_PROXY(dowloadURL, fname)\n  } else if (proxy) {\n    // 将下载链接匹配上代理协议\n    dowloadURL = proxy + dowloadURL\n    // 代理连接下载\n    DOWLOAD_FILE_URL_PROXY(dowloadURL, fname)\n  } else {\n    // 连接下载\n    DOWLOAD_FILE_URL(dowloadURL, fname)\n  }\n}\n\n/**\n * @description: 下载指定代理链接\n * @param {*} url 拼接好的代理连接\n * @param {*} filename 文件名称\n * @return {*}\n */\nexport function DOWLOAD_FILE_URL_PROXY (url, filename) {\n  // 创建一个a节点插入的document\n  var a = document.createElement('a')\n  // 模拟鼠标click点击事件\n  var event = new MouseEvent('click')\n  // 设置a节点的download属性值\n  a.download = filename\n  // 将需要下载的URL赋值给a节点的href\n  a.href = url\n  // 触发鼠标点击事件\n  a.dispatchEvent(event)\n}\n\n/**\n * @description: 下载指定链接\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n * @return {*}\n */\n export function DOWLOAD_FILE_URL (url, filename) {\n  // 获取链接二进制数据\n  fetch(url).then(res => res.blob().then(blob => {\n    // 创建一个a节点\n    var a = document.createElement('a')\n    // 创建一个可供下载链接\n    var url = window.URL.createObjectURL(blob)\n    // 将需要下载的URL赋值给a节点的href\n    a.href = url\n    // 设置节点的download属性值\n    a.download = filename\n    // 触发点击事件\n    a.click()\n    // 释放\n    window.URL.revokeObjectURL(url)\n  }))\n}"]}]}