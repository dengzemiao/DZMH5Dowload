{"remainingRequest":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js!/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","dependencies":[{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js","mtime":1618211991140},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7Ci8vIOWPguiAg+aWh+eroCBodHRwczovL2Jsb2cuY3Nkbi5uZXQvenowMDAwODg4OC9hcnRpY2xlL2RldGFpbHMvMTEzODQ3Mjk0CgovKioKICogQGRlc2NyaXB0aW9uOiDkuIvovb3mlofku7YKICogQHBhcmFtIHsqfSB1cmwg5Y+C6ICDIERPV0xPQURfRklMRV9QUk8oKQogKiBAcGFyYW0geyp9IHByb3h5IOWPguiAgyBET1dMT0FEX0ZJTEVfUFJPKCkKICogQHBhcmFtIHsqfSBwcm94eWh0dHAg5Y+C6ICDIERPV0xPQURfRklMRV9QUk8oKQogKi8KZXhwb3J0IGZ1bmN0aW9uIERPV0xPQURfRklMRSh1cmwsIHByb3h5LCBwcm94eWh0dHApIHsKICBET1dMT0FEX0ZJTEVfUFJPKHVybCwgJycsIHByb3h5LCBwcm94eWh0dHApOwp9Ci8qKgogKiBAZGVzY3JpcHRpb246IOS4i+i9veaWh+S7tgogKiBAcGFyYW0geyp9IHVybCDkuIvovb3pk77mjqXjgILvvIjkvovlpoLvvJrlhajpk77mjqUoaHR0cDovL2Rvd2xvYWQuZmlsZS9kem0ucG5nKSB8fCDpmaTljrvku6PnkIblkI7liankvZnnmoTpg6jliIbpk77mjqUoL2R6bS5wbmcpKQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOS4i+i9veaWh+S7tuWQjeensO+8jOS4uuepuuWImeWPlumTvuaOpeWwvumDqOaWh+S7tuWQjeOAgu+8iOS+i+Wmgu+8mmR6bS5wbmfvvIkKICogQHBhcmFtIHsqfSBwcm94eSDphY3nva7lpb3nmoTku6PnkIbljY/orq7jgIIo5L6L5aaC77yaL2Rvd2xvYWTvvIwgL2Rvd2xvYWQgPT0gaHR0cDovL2Rvd2xvYWQuZmlsZSkKICogQHBhcmFtIHsqfSBwcm94eWh0dHAg5Luj55CG5Y2P6K6u55qE6ZO+5o6l5Zyw5Z2A77yM5aaC5p6c6YWN572u5YiZ5Lya5pu/5o2iIHVybCDkuK3or6XmrrXku6PnkIbpk77mjqXlnLDlnYDkuLogcHJveHkg5Luj55CG5Y2P6K6u77yM5omA5LulIHByb3h5aHR0cCDmnInlgLzvvIxwcm94eSDlv4XpobvmnInlgLzjgIIo5L6L5aaC77yaaHR0cDovL2Rvd2xvYWQuZmlsZSkKICovCgpleHBvcnQgZnVuY3Rpb24gRE9XTE9BRF9GSUxFX1BSTyh1cmwsIGZpbGVuYW1lLCBwcm94eSwgcHJveHlodHRwKSB7CiAgLy8g5LiL6L295Zyw5Z2ACiAgdmFyIGRvd2xvYWRVUkwgPSB1cmw7IC8vIOacieS7o+eQhumTvuaOpeWcsOWdgO+8jOW9k+WJjemTvuaOpemHjOmdouWQjOaXtuWtmOWcqOS7o+eQhuWcsOWdgOWPr+S7pei/m+ihjOabv+aNogoKICBpZiAocHJveHlodHRwICYmIHByb3h5ICYmIGRvd2xvYWRVUkwuaW5jbHVkZXMocHJveHlodHRwKSkgewogICAgLy8g5pu/5o2i5Luj55CG6ZO+5o6l5Zyw5Z2A5Li65Luj55CG5Y2P6K6uCiAgICBkb3dsb2FkVVJMID0gZG93bG9hZFVSTC5yZXBsYWNlKHByb3h5aHR0cCwgcHJveHkpOyAvLyDku6PnkIbpk77mjqXkuIvovb0KCiAgICBET1dMT0FEX0ZJTEVfVVJMKGRvd2xvYWRVUkwsIGZpbGVuYW1lKTsKICB9IGVsc2UgaWYgKHByb3h5KSB7CiAgICAvLyDlsIbkuIvovb3pk77mjqXljLnphY3kuIrku6PnkIbljY/orq4KICAgIGRvd2xvYWRVUkwgPSBwcm94eSArIGRvd2xvYWRVUkw7IC8vIOS7o+eQhumTvuaOpeS4i+i9vQoKICAgIERPV0xPQURfRklMRV9VUkwoZG93bG9hZFVSTCwgZmlsZW5hbWUpOwogIH0gZWxzZSB7CiAgICAvLyDpk77mjqXkuIvovb0KICAgIERPV0xPQURfRklMRV9VUkxfUFJPKGRvd2xvYWRVUkwsIGZpbGVuYW1lKTsKICB9Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog5LiL6L295oyH5a6a5Luj55CG6ZO+5o6lIHx8IOW9k+WJjee9kemhteWQjOWfn+WQjeeahOmTvuaOpSB8fCAucGRm44CB44CCeGxzIOetiemdnuWbvueJh+inhumikemTvuaOpQogKiBAcGFyYW0geyp9IHVybCDmi7zmjqXlpb3nmoTku6PnkIbov57mjqUKICogQHBhcmFtIHsqfSBmaWxlbmFtZSDmlofku7blkI3np7AKICovCgpleHBvcnQgZnVuY3Rpb24gRE9XTE9BRF9GSUxFX1VSTCh1cmwsIGZpbGVuYW1lKSB7CiAgLy8g5Yib5bu65LiA5LiqYeiKgueCueaPkuWFpeeahGRvY3VtZW50CiAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IC8vIOaooeaLn+m8oOagh2NsaWNr54K55Ye75LqL5Lu2CgogIHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycpOyAvLyDorr7nva5h6IqC54K555qEZG93bmxvYWTlsZ7mgKflgLwKCiAgYS5kb3dubG9hZCA9IERPV0xPQURfRklMRV9OQU1FKHVybCwgZmlsZW5hbWUpOyAvLyDlsIbpnIDopoHkuIvovb3nmoRVUkzotYvlgLznu5lh6IqC54K555qEaHJlZgoKICBhLmhyZWYgPSB1cmw7IC8vIOinpuWPkem8oOagh+eCueWHu+S6i+S7tgoKICBhLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwp9Ci8qKgogKiBAZGVzY3JpcHRpb246IOS4i+i9veaMh+WumumTvuaOpe+8jOS9huaYr+acjeWKoeWZqOW+l+W8gOWQr+aWh+S7tuiuv+mXruadg+mZkO+8jOWQpuWImeS8muaKpei3qOWfn+mUmeivrwogKiBAcGFyYW0geyp9IHVybCDpnZ7ku6PnkIbnmoTmraPluLjpk77mjqUKICogQHBhcmFtIHsqfSBmaWxlbmFtZSDmlofku7blkI3np7AKICovCgpleHBvcnQgZnVuY3Rpb24gRE9XTE9BRF9GSUxFX1VSTF9QUk8odXJsLCBmaWxlbmFtZSkgewogIC8vIOiOt+WPlumTvuaOpeS6jOi/m+WItuaVsOaNrgogIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXR1cm4gcmVzLmJsb2IoKS50aGVuKGZ1bmN0aW9uIChibG9iKSB7CiAgICAgIC8vIOWIm+W7uuS4gOS4qmHoioLngrkKICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IC8vIOWIm+W7uuS4gOS4quWPr+S+m+S4i+i9vemTvuaOpQoKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAvLyDlsIbpnIDopoHkuIvovb3nmoRVUkzotYvlgLznu5lh6IqC54K555qEaHJlZgoKICAgICAgYS5ocmVmID0gdXJsOyAvLyDorr7nva7oioLngrnnmoRkb3dubG9hZOWxnuaAp+WAvAoKICAgICAgYS5kb3dubG9hZCA9IERPV0xPQURfRklMRV9OQU1FKHVybCwgZmlsZW5hbWUpOyAvLyDop6blj5Hngrnlh7vkuovku7YKCiAgICAgIGEuY2xpY2soKTsgLy8g6YeK5pS+CgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSk7CiAgfSk7Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbjog6I635Y+W6ZO+5o6l5paH5Lu25ZCNCiAqIEBwYXJhbSB7Kn0gdXJsIOmdnuS7o+eQhueahOato+W4uOmTvuaOpQogKiBAcGFyYW0geyp9IGZpbGVuYW1lIOaWh+S7tuWQjeensAogKi8KCmV4cG9ydCBmdW5jdGlvbiBET1dMT0FEX0ZJTEVfTkFNRSh1cmwsIGZpbGVuYW1lKSB7CiAgLy8g5paH5Lu25ZCN56ewCiAgdmFyIGZuYW1lID0gZmlsZW5hbWU7IC8vIOayoeacieaWh+S7tuWQjeWQjOaXtumTvuaOpeacieWAvAoKICBpZiAoIWZuYW1lICYmIHVybCkgewogICAgLy8g6I635b6X5pyA5ZCO5LiA5Liq5pac5p2g5Z2Q5qCHCiAgICB2YXIgaW5kZXggPSB1cmwubGFzdEluZGV4T2YoJy8nKTsgLy8g5LuO5pac5p2G5ZCO5LiA5Liq5Z2Q5qCH5byA5aeL5oiq5Y+WCgogICAgZm5hbWUgPSB1cmwuc3Vic3RyaW5nKGluZGV4ICsgMSk7CiAgfSAvLyDov5Tlm54KCgogIHJldHVybiBmbmFtZTsKfQ=="},{"version":3,"sources":["/Users/dengzemiao/Desktop/GitHub/DZMH5Dowload/src/views/dowload.js"],"names":["DOWLOAD_FILE","url","proxy","proxyhttp","DOWLOAD_FILE_PRO","filename","dowloadURL","includes","replace","DOWLOAD_FILE_URL","DOWLOAD_FILE_URL_PRO","a","document","createElement","event","MouseEvent","download","DOWLOAD_FILE_NAME","href","dispatchEvent","fetch","then","res","blob","window","URL","createObjectURL","click","revokeObjectURL","fname","index","lastIndexOf","substring"],"mappings":"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","sourcesContent":["// 参考文章 https://blog.csdn.net/zz00008888/article/details/113847294\n\n/**\n * @description: 下载文件\n * @param {*} url 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxy 参考 DOWLOAD_FILE_PRO()\n * @param {*} proxyhttp 参考 DOWLOAD_FILE_PRO()\n */\nexport function DOWLOAD_FILE (url, proxy, proxyhttp) {\n  DOWLOAD_FILE_PRO(url, '', proxy, proxyhttp)\n}\n\n/**\n * @description: 下载文件\n * @param {*} url 下载链接。（例如：全链接(http://dowload.file/dzm.png) || 除去代理后剩余的部分链接(/dzm.png))\n * @param {*} filename 下载文件名称，为空则取链接尾部文件名。（例如：dzm.png）\n * @param {*} proxy 配置好的代理协议。(例如：/dowload， /dowload == http://dowload.file)\n * @param {*} proxyhttp 代理协议的链接地址，如果配置则会替换 url 中该段代理链接地址为 proxy 代理协议，所以 proxyhttp 有值，proxy 必须有值。(例如：http://dowload.file)\n */\nexport function DOWLOAD_FILE_PRO (url, filename, proxy, proxyhttp) {\n  // 下载地址\n  var dowloadURL = url\n  // 有代理链接地址，当前链接里面同时存在代理地址可以进行替换\n  if (proxyhttp && proxy && dowloadURL.includes(proxyhttp)) {\n    // 替换代理链接地址为代理协议\n    dowloadURL = dowloadURL.replace(proxyhttp, proxy)\n    // 代理链接下载\n    DOWLOAD_FILE_URL(dowloadURL, filename)\n  } else if (proxy) {\n    // 将下载链接匹配上代理协议\n    dowloadURL = proxy + dowloadURL\n    // 代理链接下载\n    DOWLOAD_FILE_URL(dowloadURL, filename)\n  } else {\n    // 链接下载\n    DOWLOAD_FILE_URL_PRO(dowloadURL, filename)\n  }\n}\n\n/**\n * @description: 下载指定代理链接 || 当前网页同域名的链接 || .pdf、。xls 等非图片视频链接\n * @param {*} url 拼接好的代理连接\n * @param {*} filename 文件名称\n */\nexport function DOWLOAD_FILE_URL (url, filename) {\n  // 创建一个a节点插入的document\n  var a = document.createElement('a')\n  // 模拟鼠标click点击事件\n  var event = new MouseEvent('click')\n  // 设置a节点的download属性值\n  a.download = DOWLOAD_FILE_NAME(url, filename)\n  // 将需要下载的URL赋值给a节点的href\n  a.href = url\n  // 触发鼠标点击事件\n  a.dispatchEvent(event)\n}\n\n/**\n * @description: 下载指定链接，但是服务器得开启文件访问权限，否则会报跨域错误\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n */\nexport function DOWLOAD_FILE_URL_PRO (url, filename) {\n  // 获取链接二进制数据\n  fetch(url).then(res => res.blob().then(blob => {\n    // 创建一个a节点\n    var a = document.createElement('a')\n    // 创建一个可供下载链接\n    var url = window.URL.createObjectURL(blob)\n    // 将需要下载的URL赋值给a节点的href\n    a.href = url\n    // 设置节点的download属性值\n    a.download = DOWLOAD_FILE_NAME(url, filename)\n    // 触发点击事件\n    a.click()\n    // 释放\n    window.URL.revokeObjectURL(url)\n  }))\n}\n\n/**\n * @description: 获取链接文件名\n * @param {*} url 非代理的正常链接\n * @param {*} filename 文件名称\n */\nexport function DOWLOAD_FILE_NAME (url, filename) {\n  // 文件名称\n  var fname = filename\n  // 没有文件名同时链接有值\n  if (!fname && url) {\n    // 获得最后一个斜杠坐标\n    const index = url.lastIndexOf('/')\n    // 从斜杆后一个坐标开始截取\n    fname = url.substring(index + 1)\n  }\n  // 返回\n  return fname\n}"]}]}